---
title: "electron âœ–ï¸React âœ–ï¸TypeScriptã§ä¿ºã®ä¿ºã«ã‚ˆã‚‹ä¿ºã®ãŸã‚ã®Zennç”¨ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã£ã¦ã¿ã‚‹â‘ "
emoji: "ğŸ˜˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [react, typescript, electron, javascript, ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³]
published: false

---

ã¿ãªã•ã‚“ã¯ã˜ã‚ã¾ã—ã¦ã€‚

æ™®æ®µã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã€ã²ã£ãã‚Šã¨phpç­‰ã‚’æ›¸ãã“ã¨ã§ã”é£¯ã‚’é£Ÿã¹ã¦ãŠã‚Šã¾ã™ã€‚
ã“ã®åº¦ã¯æµè¡Œã‚Šã®Zennã«æŠ•ç¨¿ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã€å¤§äººæ°—ã®**React**ã¨**TypeScript**ã‚’å­¦ç¿’ã™ã‚‹è¨˜äº‹ã«ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

å­¦ç¿’ã™ã‚‹ã«ã—ã¦ã‚‚Todoã‚¢ãƒ—ãƒªãªã©ã§ã¯ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿ã¦ãšã‚¼ãƒ«ãƒ€ã‚„ãƒ”ã‚¯ãƒŸãƒ³ã«æ™‚é–“ã‚’å¥ªã‚ã‚ŒãŒã¡ãªã®ã§ã€**ä¿ºã®ä¿ºã«ã‚ˆã‚‹ä¿ºã®ãŸã‚ã®**ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã‚‹ã‚“ã ã£ã¦ã„ã†æ°—æŒã¡ã§æŒ‘ã‚€ã“ã¨ã«ã—ã¾ã™ã€‚


# ã¯ã˜ã‚ã«
ã“ã‚“ãªæ„Ÿã˜ã®ã‚‚ã®ã‚’å®Œæˆå½¢ã¨ã—ã¦ç›®æŒ‡ã—ã¾ã™ã€‚

![](/images/ezgif.com-video-to-gif.gif)

ã“ã®ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†ã¨æ€ã£ãŸãã£ã‹ã‘ã¯ã€
- Zennã®Webã‚¨ãƒ‡ã‚£ã‚¿ã«Markdownè¨˜æ³•ã‚’æŒ¿å…¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãŒãªã„ã“ã¨
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ãªãŒã‚‰ç·¨é›†ã§ããªã„ã“ã¨
- githubé€£æºã™ã‚‹ã¨ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒã‚ã‚“ã©ãã•ã„ã“ã¨
- ã¡ã‚‡ã†ã©TypeScriptã¨Reactã‚’å‹‰å¼·ã—ã‚ˆã†ã¨æ€ã£ã¦ãŸã“ã¨

ã§ã™ã€‚
ã“ã®èª²é¡Œã‚’å…¨ã¦è§£æ±ºã™ã‚‹ã‚¢ãƒ—ãƒªã«ã—ã‚ˆã†ã¨æ€ã£ã¦ã¾ã™ã€‚

## å‰ææ¡ä»¶
- [Zennã¨ã®GitHubãƒªãƒã‚¸ãƒˆãƒªé€£æºãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨](https://zenn.dev/zenn/articles/connect-to-github)

## å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½
æœ€ä½é™ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
- Zennã¨ã®ãƒ•ã‚¡ã‚¤ãƒ«åŒæœŸ
- Zennãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®è‡ªå‹•ä¿å­˜
- ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ç”»åƒã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®è¨€èªåˆ¥ãƒã‚¤ãƒ©ã‚¤ãƒˆ
- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ç¤º

## åˆ©ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [ElectronForge](https://www.electronforge.io/)
	electronã‚’ã„ã„æ„Ÿã˜ã§ç°¡å˜ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ãã‚Œã‚‹
- [react-simplemde-editor](https://github.com/RIP21/react-simplemde-editor)
 ã„ã„æ„Ÿã˜ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿
- [marked](https://github.com/markedjs/marked)
ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼ã®æ–‡å­—åˆ—ã‚’HTMLã«å¤‰æ›ã—ã¦ãã‚Œã‚‹
- [highlight.js](https://github.com/highlightjs/highlight.js)
  ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆã¤ã‘ã¦ãã‚Œã‚‹
- [mantine](https://mantine.dev/)
  Reactã®UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
	
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
æ—©é€Ÿ[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.electronforge.io/templates/typescript-+-webpack-template)ã«å¾“ã„ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Webpack,TypeScriptã‚’templateã«é¸æŠã—ã¦ã€Electron ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¾ã™ã€‚

```
$ npm init electron-app@latest zenn-md-editor -- --template=webpack-typescript
```
ä»¥ä¸Šã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨zenn-md-editorãƒ•ã‚©ãƒ«ãƒ€ãŒã§ãã‚ãŒã‚‹ã®ã§ã€ã¨ã‚Šã‚ãˆãšå‹•ãã‹ç¢ºèªã—ã¾ã™ã€‚

```
$ cd zenn-md-editor
$ npm run start
```

ã§ãã¾ã—ãŸï¼
![](/images/screen-shot1.png)

ç¶šã„ã¦ã€tsconfig.jsonã«JSXå¤‰æ›ã®æŒ‡å®šã‚’ã—ã¾ã™ã€‚
```json:tsconfig.json
{
  "compilerOptions": {
    "target": "ES6",
    "allowJs": true,
    "module": "commonjs",
    "skipLibCheck": true,
    "esModuleInterop": true,
    "noImplicitAny": true,
    "sourceMap": true,
    "baseUrl": ".",
    "outDir": "dist",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "paths": {
      "*": ["node_modules/*"]
    },
    "jsx": "react-jsx", // è¿½åŠ 
  },
  "include": ["src/**/*"]
}
```
ã“ã‚Œã§é–‹ç™ºæº–å‚™ãŒæ•´ã£ãŸã¨ã„ã£ãŸã¨ã“ã‚ã§ã—ã‚‡ã†ã‹ã€‚
ç°¡å˜ã§ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ˜­
# ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã®ä½œæˆ
## åˆæœŸç”»é¢ã®è¡¨ç¤º

ã¾ãšå¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚
```
$ npm install --save react react-dom react-simplemde-editor easymde highlight.js marked
$ npm install --save-dev @types/react @types/react-dom @types/marked
```

ç¶šã„ã¦srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«root.tsxã¨App.tsxãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦App.tsxã‚’åˆæœŸç”»é¢ã¨ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚
- ğŸ—‚src/index.htmlã«åˆæœŸç”»é¢è¡¨ç¤ºã®ãŸã‚idã‚’è¿½è¨˜
```diff html:src/index.html
  <head>
    <meta charset="UTF-8" />
    <title>Hello World!</title>
  </head>
  <body>
-	<h1>ğŸ’– Hello World!</h1>
-  <p>Welcome to your Electron application.</p>

+    <div id="app"></div>
  </body>
```

- ğŸ—‚root.tsã§Appã‚’è¡¨ç¤º
```tsx:src/root.tsx
import { createRoot } from "react-dom/client";

import App from "./App";

function render() {
  const root = createRoot(document.getElementById("app"));
  root.render(<App />);
}

render();
```

- ğŸ—‚renderer.tsã§root.tsxã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯Webpackã§è‡ªå‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€"renderer" contextã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã‚„ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦ã¯å¾Œæ—¥ã¾ã¨ã‚ãŸã„ã¨æ€ã£ã¦ã¾ã™ã€‚
```diff ts:renderer.ts
import './index.css';
+ import './root';

console.log('ğŸ‘‹ This message is being logged by "renderer.js", included via webpack');
```

- ğŸ—‚App.tsxç·¨é›†
```tsx:src/App.tsx
const App: React.FC = () => {
  return (
    <div>Hello World!</div>
  )
}

export default App;
```
ä¸­èº«ã¯èª¬æ˜ã™ã‚‹ã¾ã§ã‚‚ãªã„ã®ã§çœãã¾ã™ã€‚
è¡¨ç¤ºã§ãã¾ã—ãŸï¼

![](/images/screen-shot2.png)

## ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã®Componentä½œæˆ
ã„ã‚ˆã„ã‚ˆæœ¬ç•ªï¼ã¨è¨€ã£ã¦ã‚‚ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã ã‘ã§ã™ãŒã€ã€

srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«componentsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€Home.tsxã¨editor/MarkdownEditor.tsxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚
Home.tsxã¯å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‘¼ã³å‡ºã—ã€MarkdownEditor.tsxã¯ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿è‡ªä½“ã§ã™ã€‚
ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä»¥ä¸‹ã€‚
```
src
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ editor
â”‚   â”‚   â””â”€â”€ MarkdownEditor.tsx
â”‚   â””â”€â”€ Home.tsx
â””â”€â”€ App.tsx
``` 
- ğŸ—‚App.tsxç·¨é›†
```diff tsx:src/App.tsx
+ import Home from './components/Home';

const App: React.FC = () => {
  return (
-    <div>Hello World!</div>
+   <Home/>
  )
}

export default App;
```

- ğŸ—‚Home.tsxä½œæˆ
```tsx: src/components/Home.tsx
import MarkdownEditor from '../components/editor/MarkdownEditor';

const Home: React.FC = () => {
  return (
    <>
      <MarkdownEditor/>
    </>
  )
}

export default Home;
```

- ğŸ—‚MarkdownEditor.tsxä½œæˆ
```tsx:src/components/editor/MarkdownEditor.tsx
import SimpleMdeReact from "react-simplemde-editor";
import "easymde/dist/easymde.min.css";

const MarkdownEditor: React.FC = () => {
  return (
    <SimpleMdeReact id="simple-mde"/>
  );
};

export default MarkdownEditor;
```

ã“ã“ã¾ã§ã§ä¸€æ—¦è¡¨ç¤ºã—ã¦ã¿ã‚‹ã¨ã€å‹•ä½œã¯ã—ã¦ã„ã¾ã™ãŒãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚

![](/images/screen-shot3.png)

ã‚¨ãƒ©ãƒ¼ã‚’è¦‹ã‚‹ã¨å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®CDNãŒCSPã§æ‹’å¦ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

è¶…ç°¡å˜ã«è¨€ã†ã¨ã€Webã‚µã‚¤ãƒˆãŒæ”»æ’ƒã•ã‚Œãªã„ã‚ˆã†ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã—ã¦ã‚ã‚‹ã®ã§ã€å¤–éƒ¨èª­ã¿è¾¼ã¿ã§è¨±å¯ã™ã‚‹ã‚‚ã®ã¯æ˜ç¤ºçš„ã«è¨±å¯ã—ã¦ã£ã¦ã“ã¨ã§ã™ã‹ã­ã€‚
â€» è©³ã—ãã¯[ã‚³ãƒãƒ©](https://developer.mozilla.org/ja/docs/Web/HTTP/CSP)

[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.electronjs.org/ja/docs/latest/tutorial/security)ã«è©³ã—ãè¼‰ã£ã¦ã¾ã™ãŒã€src/index.tsã‚’ç·¨é›†ã—ã¦ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ã‚‹è©²å½“ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨±å¯ã—ã¾ã™ã€‚

```diff ts:src/index.ts
-import { app, BrowserWindow } from 'electron';
+import { app, BrowserWindow, session } from 'electron';

...

- app.on('ready', createWindow);

+// ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæº–å‚™ã§ããŸå¾Œã«CSPã‚’è¨­å®š
+app.whenReady().then(() => {
+  session.defaultSession.webRequest.onHeadersReceived((details, callback) => {
+    const cspHeader = "default-src 'self' 'unsafe-eval' 'unsafe-inline' file: data: https://maxcdn.bootstrapcdn.com https://cdn.jsdelivr.net/;";
+
+    callback({
+      responseHeaders: {
+        ...details.responseHeaders,
+        'Content-Security-Policy': [cspHeader]
+      }
+    });
+  });
+
+  createWindow(); // æœ€åˆã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½œæˆ
+});
```

ã“ã‚Œã§ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãŒå•é¡Œãªãè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼

## ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
### ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ã“ã®ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†ã¨æ€ã£ãŸã‚­ãƒƒã‚«ã‚±ã®ä¸€ã¤ã«ã€Markdownè¨˜æ³•ã‚’æŒ¿å…¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãŒæ¬²ã—ã„ã¨ã„ã†æ°—æŒã¡ãŒã‚ã£ãŸã®ã§ã€ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‹ã‚‰ã„ãã¾ã™ã€‚



