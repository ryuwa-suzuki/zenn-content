---
title: "electron âœ–ï¸React âœ–ï¸TypeScriptã§ä¿ºã®ä¿ºã«ã‚ˆã‚‹ä¿ºã®ãŸã‚ã®Zennç”¨ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã£ã¦ã¿ã‚‹â‘ "
emoji: "ğŸ˜˜"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [react, typescript, electron, javascript, ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³]
published: false

---

ã¿ãªã•ã‚“ã¯ã˜ã‚ã¾ã—ã¦ã€‚

æ™®æ®µã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã¨ã—ã¦ã€ã²ã£ãã‚Šã¨phpç­‰ã‚’æ›¸ãã“ã¨ã§ã”é£¯ã‚’é£Ÿã¹ã¦ãŠã‚Šã¾ã™ã€‚
ã“ã®åº¦ã¯æµè¡Œã‚Šã®Zennã«æŠ•ç¨¿ã™ã‚‹ã¨ã„ã†ã“ã¨ã§ã€å¤§äººæ°—ã®**React**ã¨**TypeScript**ã‚’å­¦ç¿’ã™ã‚‹è¨˜äº‹ã«ã™ã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚

å­¦ç¿’ã™ã‚‹ã«ã—ã¦ã‚‚Todoã‚¢ãƒ—ãƒªãªã©ã§ã¯ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ä¿ã¦ãšã‚¼ãƒ«ãƒ€ã‚„ãƒ”ã‚¯ãƒŸãƒ³ã«æ™‚é–“ã‚’å¥ªã‚ã‚ŒãŒã¡ãªã®ã§ã€**ä¿ºã®ä¿ºã«ã‚ˆã‚‹ä¿ºã®ãŸã‚ã®**ã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½œã‚‹ã‚“ã ã£ã¦ã„ã†æ°—æŒã¡ã§æŒ‘ã‚€ã“ã¨ã«ã—ã¾ã™ã€‚


# ã¯ã˜ã‚ã«
ã“ã‚“ãªæ„Ÿã˜ã®ã‚‚ã®ã‚’å®Œæˆå½¢ã¨ã—ã¦ç›®æŒ‡ã—ã¾ã™ã€‚

![](/images/ezgif.com-video-to-gif.gif)

ã“ã®ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†ã¨æ€ã£ãŸãã£ã‹ã‘ã¯ã€
- Zennã®Webã‚¨ãƒ‡ã‚£ã‚¿ã«Markdownè¨˜æ³•ã‚’æŒ¿å…¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãŒãªã„ã“ã¨
- ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã—ãªãŒã‚‰ç·¨é›†ã§ããªã„ã“ã¨
- githubé€£æºã™ã‚‹ã¨ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒã‚ã‚“ã©ãã•ã„ã“ã¨
- ã¡ã‚‡ã†ã©TypeScriptã¨Reactã‚’å‹‰å¼·ã—ã‚ˆã†ã¨æ€ã£ã¦ãŸã“ã¨

ã§ã™ã€‚
ã“ã®èª²é¡Œã‚’å…¨ã¦è§£æ±ºã™ã‚‹ã‚¢ãƒ—ãƒªã«ã—ã‚ˆã†ã¨æ€ã£ã¦ã¾ã™ã€‚

## å‰ææ¡ä»¶
- [Zennã¨ã®GitHubãƒªãƒã‚¸ãƒˆãƒªé€£æºãŒå®Œäº†ã—ã¦ã„ã‚‹ã“ã¨](https://zenn.dev/zenn/articles/connect-to-github)

## å®Ÿè£…ã™ã‚‹æ©Ÿèƒ½
æœ€ä½é™ã€ä»¥ä¸‹ã®æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
- Zennã¨ã®ãƒ•ã‚¡ã‚¤ãƒ«åŒæœŸ
- Zennãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®è‡ªå‹•ä¿å­˜
- ç”»åƒã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
- ç”»åƒã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®è¨€èªåˆ¥ãƒã‚¤ãƒ©ã‚¤ãƒˆ
- ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ç¤º

## åˆ©ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [ElectronForge](https://www.electronforge.io/)
	electronã‚’ã„ã„æ„Ÿã˜ã§ç°¡å˜ã«ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ãã‚Œã‚‹
- [react-simplemde-editor](https://github.com/RIP21/react-simplemde-editor)
 ã„ã„æ„Ÿã˜ã®ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿
- [marked](https://github.com/markedjs/marked)
ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³å½¢å¼ã®æ–‡å­—åˆ—ã‚’HTMLã«å¤‰æ›ã—ã¦ãã‚Œã‚‹
- [highlight.js](https://github.com/highlightjs/highlight.js)
  ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ãƒã‚¤ãƒ©ã‚¤ãƒˆã¤ã‘ã¦ãã‚Œã‚‹
- [mantine](https://mantine.dev/)
  Reactã®UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª
	
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ä½œæˆ
æ—©é€Ÿ[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.electronforge.io/templates/typescript-+-webpack-template)ã«å¾“ã„ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§Webpack,TypeScriptã‚’templateã«é¸æŠã—ã¦ã€Electron ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ã¾ã™ã€‚

```
$ npm init electron-app@latest zenn-md-editor -- --template=webpack-typescript
```
ä»¥ä¸Šã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨zenn-md-editorãƒ•ã‚©ãƒ«ãƒ€ãŒã§ãã‚ãŒã‚‹ã®ã§ã€ã¨ã‚Šã‚ãˆãšå‹•ãã‹ç¢ºèªã—ã¾ã™ã€‚

```
$ cd zenn-md-editor
$ npm run start
```

ã§ãã¾ã—ãŸï¼
![](/images/screen-shot1.png)

ç¶šã„ã¦ã€tsconfig.jsonã«JSXå¤‰æ›ã®æŒ‡å®šã‚’ã—ã¾ã™ã€‚
```json:tsconfig.json
{
  "compilerOptions": {
    "target": "ES6",
    "allowJs": true,
    "module": "commonjs",
    "skipLibCheck": true,
    "esModuleInterop": true,
    "noImplicitAny": true,
    "sourceMap": true,
    "baseUrl": ".",
    "outDir": "dist",
    "moduleResolution": "node",
    "resolveJsonModule": true,
    "paths": {
      "*": ["node_modules/*"]
    },
    "jsx": "react-jsx", // è¿½åŠ 
  },
  "include": ["src/**/*"]
}
```
ã“ã‚Œã§é–‹ç™ºæº–å‚™ãŒæ•´ã£ãŸã¨ã„ã£ãŸã¨ã“ã‚ã§ã—ã‚‡ã†ã‹ã€‚
ç°¡å˜ã§ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ˜­
# ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã®ä½œæˆ
## åˆæœŸç”»é¢ã®è¡¨ç¤º

ã¾ãšå¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’è¡Œã„ã¾ã™ã€‚
```
$ npm install --save react react-dom react-simplemde-editor easymde highlight.js marked
$ npm install --save-dev @types/react @types/react-dom @types/marked
```

ç¶šã„ã¦srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«root.tsxã¨App.tsxãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ–°è¦ä½œæˆã—ã¦App.tsxã‚’åˆæœŸç”»é¢ã¨ã—ã¦è¡¨ç¤ºã—ã¾ã™ã€‚
- ğŸ—‚src/index.htmlã«åˆæœŸç”»é¢è¡¨ç¤ºã®ãŸã‚idã‚’è¿½è¨˜
```diff html:src/index.html
  <head>
    <meta charset="UTF-8" />
    <title>Hello World!</title>
  </head>
  <body>
-	<h1>ğŸ’– Hello World!</h1>
-  <p>Welcome to your Electron application.</p>

+    <div id="app"></div>
  </body>
```

- ğŸ—‚root.tsã§Appã‚’è¡¨ç¤º
```tsx:src/root.tsx
import { createRoot } from "react-dom/client";

import App from "./App";

function render() {
  const root = createRoot(document.getElementById("app"));
  root.render(<App />);
}

render();
```

- ğŸ—‚renderer.tsã§root.tsxã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯Webpackã§è‡ªå‹•çš„ã«ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã€"renderer" contextã§å®Ÿè¡Œã•ã‚Œã¾ã™ã€‚ãƒ¬ãƒ³ãƒ€ãƒ©ãƒ¼ã‚„ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã«ã¤ã„ã¦ã¯å¾Œæ—¥ã¾ã¨ã‚ãŸã„ã¨æ€ã£ã¦ã¾ã™ã€‚
```diff ts:renderer.ts
import './index.css';
+ import './root';

console.log('ğŸ‘‹ This message is being logged by "renderer.js", included via webpack');
```

- ğŸ—‚App.tsxç·¨é›†
```tsx:src/App.tsx
const App: React.FC = () => {
  return (
    <div>Hello World!</div>
  )
}

export default App;
```
ä¸­èº«ã¯èª¬æ˜ã™ã‚‹ã¾ã§ã‚‚ãªã„ã®ã§çœãã¾ã™ã€‚
è¡¨ç¤ºã§ãã¾ã—ãŸï¼

![](/images/screen-shot2.png)

## ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ã®Componentä½œæˆ
ã„ã‚ˆã„ã‚ˆæœ¬ç•ªï¼ã¨è¨€ã£ã¦ã‚‚ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã ã‘ã§ã™ãŒã€ã€

srcãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«componentsãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€Home.tsxã¨editor/MarkdownEditor.tsxãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚
Home.tsxã¯å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‘¼ã³å‡ºã—ã€MarkdownEditor.tsxã¯ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿è‡ªä½“ã§ã™ã€‚
ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã¯ä»¥ä¸‹ã€‚
```
src
â”œâ”€â”€ components
â”‚   â”œâ”€â”€ editor
â”‚   â”‚   â””â”€â”€ MarkdownEditor.tsx
â”‚   â””â”€â”€ Home.tsx
â””â”€â”€ App.tsx
``` 
- ğŸ—‚App.tsxç·¨é›†
```diff tsx:src/App.tsx
+ import Home from './components/Home';

const App: React.FC = () => {
  return (
-    <div>Hello World!</div>
+   <Home/>
  )
}

export default App;
```

- ğŸ—‚Home.tsxä½œæˆ
```tsx: src/components/Home.tsx
import MarkdownEditor from '../components/editor/MarkdownEditor';

const Home: React.FC = () => {
  return (
    <>
      <MarkdownEditor/>
    </>
  )
}

export default Home;
```

- ğŸ—‚MarkdownEditor.tsxä½œæˆ
```tsx:src/components/editor/MarkdownEditor.tsx
import SimpleMdeReact from "react-simplemde-editor";
import "easymde/dist/easymde.min.css";

const MarkdownEditor: React.FC = () => {
  return (
    <SimpleMdeReact id="simple-mde"/>
  );
};

export default MarkdownEditor;
```

ã“ã“ã¾ã§ã§ä¸€æ—¦è¡¨ç¤ºã—ã¦ã¿ã‚‹ã¨ã€å‹•ä½œã¯ã—ã¦ã„ã¾ã™ãŒãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ã€‚

![](/images/screen-shot3.png)

ã‚¨ãƒ©ãƒ¼ã‚’è¦‹ã‚‹ã¨å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®CDNãŒCSPã§æ‹’å¦ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

è¶…ç°¡å˜ã«è¨€ã†ã¨ã€Webã‚µã‚¤ãƒˆãŒæ”»æ’ƒã•ã‚Œãªã„ã‚ˆã†ã«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã—ã¦ã‚ã‚‹ã®ã§ã€å¤–éƒ¨èª­ã¿è¾¼ã¿ã§è¨±å¯ã™ã‚‹ã‚‚ã®ã¯æ˜ç¤ºçš„ã«è¨±å¯ã—ã¦ã£ã¦ã“ã¨ã§ã™ã‹ã­ã€‚
â€» è©³ã—ãã¯[ã‚³ãƒãƒ©](https://developer.mozilla.org/ja/docs/Web/HTTP/CSP)

[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://www.electronjs.org/ja/docs/latest/tutorial/security)ã«è©³ã—ãè¼‰ã£ã¦ã¾ã™ãŒã€src/index.tsã‚’ç·¨é›†ã—ã¦ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ã‚‹è©²å½“ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨±å¯ã—ã¾ã™ã€‚

```diff ts:src/index.ts
-import { app, BrowserWindow } from 'electron';
+import { app, BrowserWindow, session } from 'electron';

...

- app.on('ready', createWindow);

+// ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒæº–å‚™ã§ããŸå¾Œã«CSPã‚’è¨­å®š
+app.whenReady().then(() => {
+  session.defaultSession.webRequest.onHeadersReceived((details, callback) => {
+    const cspHeader = "default-src 'self' 'unsafe-eval' 'unsafe-inline' file: data: https://maxcdn.bootstrapcdn.com https://cdn.jsdelivr.net/;";
+
+    callback({
+      responseHeaders: {
+        ...details.responseHeaders,
+        'Content-Security-Policy': [cspHeader]
+      }
+    });
+  });
+
+  createWindow(); // æœ€åˆã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’ä½œæˆ
+});
```

ã“ã‚Œã§ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãŒå•é¡Œãªãè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼

## ã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
### ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ã“ã®ã‚¢ãƒ—ãƒªã‚’ä½œã‚ã†ã¨æ€ã£ãŸã‚­ãƒƒã‚«ã‚±ã®ä¸€ã¤ã«ã€Markdownè¨˜æ³•ã‚’æŒ¿å…¥ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ãŒæ¬²ã—ã„ã¨ã„ã†æ°—æŒã¡ãŒã‚ã£ãŸã®ã§ã€ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‹ã‚‰ã„ãã¾ã™ã€‚

SimpleMdeã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¯EasyMDEã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’propsã¨ã—ã¦æ¸¡ã™ã“ã¨ãŒã§ãã€ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

[https://github.com/Ionaru/easy-markdown-editor#toolbar-icons](https://github.com/Ionaru/easy-markdown-editor#toolbar-icons)ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ä¸€è¦§ãŒè¦‹ã‚Œã‚‹ã®ã§ã€ã“ã“ã‹ã‚‰å¥½ããªã‚‚ã®ã‚’è¿½åŠ ã—ã¾ã™ã€‚

ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã«ç‹¬è‡ªã®ã‚¢ã‚¤ã‚³ãƒ³ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€ãã‚Œã¯ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®éš›ã«ã€‚

- ğŸ—‚MarkdownEditor.tsxã‚’ç·¨é›†
```diff tsx:src/components/editor/MarkdownEditor.tsx
+import { useMemo } from "react";
 import SimpleMdeReact from "react-simplemde-editor";
+import SimpleMDE from "easymde";
 import "easymde/dist/easymde.min.css";
+const toolbar: SimpleMDE.Options["toolbar"] = [
+  'bold',
+  'italic',
+  'quote',
+  'unordered-list',
+  'ordered-list',
+  'link',
+  'image',
+  'strikethrough',
+  'code',
+  'table',
+  'redo',
+  'heading',
+  'undo',
+  'clean-block',
+  'horizontal-rule',
+  'preview',
+  'side-by-side',
+  'fullscreen'
+];
 
 const MarkdownEditor: React.FC = () => {
+  const mdeOptions: SimpleMDE.Options = useMemo(() => {
+    return {
+      width: 'auto',
+      spellChecker: false,
+      toolbar
+    };
+  }, []);
+
   return (
-    <SimpleMdeReact id="simple-mde"/>
+    <SimpleMdeReact
+      id="simple-mde"
+      options={mdeOptions}/>
   );
 };
```
### ã‚ªãƒ¼ãƒˆã‚»ãƒ¼ãƒ–æ©Ÿèƒ½ã®è¿½åŠ 

SimpleMDEã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ªãƒ¼ãƒˆã‚»ãƒ¼ãƒ–æ©Ÿèƒ½ãŒã‚ã‚‹ã®ã§ã€ãã‚Œã‚’åˆ©ç”¨ã—ã¾ã™ã€‚
Zennãƒ•ã‚¡ã‚¤ãƒ«ã¨ã®å®Ÿè£…æ™‚ã«ã¯ç·¨é›†ä¸­ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«å†…å®¹ã‚’æ›¸ãè¾¼ã¿ã¾ã™ãŒã€åŒæœŸã—ã¦ã„ãªã„å ´åˆã‚‚ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸã„ã®ã§ã€‚

ã“ã®ã‚ªãƒ¼ãƒˆã‚»ãƒ¼ãƒ–æ©Ÿèƒ½ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«smde_{æŒ‡å®šã—ãŸid}ã¨ã„ã†Keyã§ä¿å­˜ã—ã¦ãã‚Œã¾ã™ã€‚
ç·¨é›†1ç§’å¾Œã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚
- ğŸ—‚MarkdownEditor.tsxã‚’ç·¨é›†
```diff tsx:src/components/editor/MarkdownEditor.tsx
...

+const delay = 1000;// 1ç§’å¾Œã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®š
 
 const MarkdownEditor: React.FC = () => {
+  const value = localStorage.getItem('smde_saved_content') || "";// ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å€¤ã‚’ãƒãƒªãƒ¥ãƒ¼ã«ã‚»ãƒƒãƒˆ
   const mdeOptions: SimpleMDE.Options = useMemo(() => {
     return {
       width: 'auto',
       spellChecker: false,
-      toolbar
+      toolbar,
+      autosave: {
+        enabled: true,
+        uniqueId: "saved_content",
+        delay
+      },
     };
   }, []);
 
   return (
     <SimpleMdeReact
       id="simple-mde"
-      options={mdeOptions}/>
+      options={mdeOptions}
+      value={value}/>
   );
 };
```

ã“ã‚Œã§ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ã‚‚å€¤ãŒä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸï¼

### ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
ã¾ãšã¯highlight.js, marked, highlight.jsã§è‡ªåˆ†ã®å¥½ã¿ã®cssã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
https://highlightjs.org/examples

- ğŸ—‚MarkdownEditor.tsxã‚’ç·¨é›†
```diff tsx:src/components/editor/MarkdownEditor.tsx
+ import { marked } from "marked";
+ import hljs from 'highlight.js';
+ import "highlight.js/styles/base16/bright.css"; //ğŸ‘‰ https://highlightjs.org/examples
```

ç¶šã„ã¦ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã§tsx:index.tsxã®ã‚ˆã†ã«{è¨€èª}:{ãƒ•ã‚¡ã‚¤ãƒ«å}ã§å…¥åŠ›ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„ã®ã§ã€SimpleMDE.Optionsã®previewRenderã‚’ä½¿ã£ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã¦ã„ãã¾ã™ã€‚

previewRenderã¯ãƒ—ãƒ¬ãƒ¼ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã® Markdown ã‚’è§£æã—ã¦ HTMLã‚’è¿”ã™ã‚«ã‚¹ã‚¿ãƒ é–¢æ•°ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã™ã‚‹ã¨ãã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

- ğŸ—‚MarkdownEditor.tsxã‚’ç·¨é›†

```diff tsx:src/components/editor/MarkdownEditor.tsx
...

+  const previewRender = (value: string): string => {
+    const renderer = new marked.Renderer();
+    renderer.code = (code, codeInfo) => {
+      const codeInfoSplit = codeInfo.split(':');
+      const lang = codeInfoSplit[0]
+      const fileName = codeInfoSplit[1];
+      const langClass = hljs.getLanguage(lang) ? lang : 'plaintext';
+      const highlightedCode = hljs.highlight(langClass, code).value;
+      const codeBlockClass = fileName === undefined ? 'code-block-no-info' : 'code-block';
+
+      let codeBlock = `<code class="hljs ${codeBlockClass} language-${langClass}">${highlightedCode}</code>`
+      if (fileName !== undefined) {
+        codeBlock = `<div class="code-info"><span>${fileName}</span></div>` + codeBlock
+      }
+      return `<pre>${codeBlock}</pre>`
+    };
+
+    return marked(value, { renderer });
+  };
+
   const mdeOptions: SimpleMDE.Options = useMemo(() => {
     return {
       width: 'auto',
       spellChecker: false,
       toolbar,
+      previewRender,
       autosave: {
         enabled: true,
         uniqueId: "saved_content",
         delay
       },
     };
-  }, []);
+  }, [previewRender]);
```

ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã®è¦‹ãŸç›®ã‚‚æ•´ãˆãŸã„ã®ã¨ã€ã‚¨ãƒ‡ã‚£ã‚¿ãŒå…¨ç”»é¢ã«è¡¨ç¤ºã•ã‚Œã¦æ¬²ã—ã„ã®ã§ã€cssã‚’ç·¨é›†ã—ã¾ã™ã€‚
- ğŸ—‚index.cssã‚’ç·¨é›†
```css:src/index.css
body {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica,
    Arial, sans-serif;
  margin: auto;
  max-width: auto;
}

.code-block{
  border-radius: 0px 0px 10px 10px
}

.code-block-no-info{
  border-radius: 10px
}

code{
  font-size: 1rem;
}

.code-info {
  display: flex;
  justify-content: space-between;
  color: #e6e6ee;
  background: #484747;
  padding: 12px;
  font-size: 12px;
  border-radius: 10px 10px 0px 0px;
}
```

ã¾ãã¾ãã„ã„æ„Ÿã˜ã€‚
![](/images/screen-shot4.png)

### MarkdownEditor.tsxã®ã‚³ãƒ¼ãƒ‰å…¨ä½“
```tsx:src/components/editor/MarkdownEditor.tsx
import { useMemo } from "react";
import SimpleMdeReact from "react-simplemde-editor";
import SimpleMDE from "easymde";
import { marked } from "marked";
import hljs from 'highlight.js';
import "easymde/dist/easymde.min.css";
import "highlight.js/styles/base16/bright.css"; //ğŸ‘‰ https://highlightjs.org/examples

const toolbar: SimpleMDE.Options["toolbar"] = [
  'bold',
  'italic',
  'quote',
  'unordered-list',
  'ordered-list',
  'link',
  'image',
  'strikethrough',
  'code',
  'table',
  'redo',
  'heading',
  'undo',
  'clean-block',
  'horizontal-rule',
  'preview',
  'side-by-side',
  'fullscreen'
];

const delay = 1000; // 1ç§’å¾Œã«ä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®š

const MarkdownEditor: React.FC = () => {
  const value = localStorage.getItem('smde_saved_content') || ""; // ãƒªãƒ­ãƒ¼ãƒ‰æ™‚ã«ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®å€¤ã‚’SimpleMdeReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®valueã¨ã—ã¦ã‚»ãƒƒãƒˆ

  const previewRender = (value: string): string => {
    const renderer = new marked.Renderer();
    renderer.code = (code, codeInfo) => {
      const codeInfoSplit = codeInfo.split(':');
      const lang = codeInfoSplit[0]
      const fileName = codeInfoSplit[1];
      const langClass = hljs.getLanguage(lang) ? lang : 'plaintext';
      const highlightedCode = hljs.highlight(langClass, code).value;
      const codeBlockClass = fileName === undefined ? 'code-block-no-info' : 'code-block';

      let codeBlock = `<code class="hljs ${codeBlockClass} language-${langClass}">${highlightedCode}</code>`
      if (fileName !== undefined) {
        codeBlock = `<div class="code-info"><span>${fileName}</span></div>` + codeBlock
      }
      return `<pre>${codeBlock}</pre>`
    };

    return marked(value, { renderer });
  };

  const mdeOptions: SimpleMDE.Options = useMemo(() => {
    return {
      width: 'auto',
      spellChecker: false,
      toolbar,
      previewRender,
      autosave: {
        enabled: true,
        uniqueId: "saved_content",
        delay
      },
    };
  }, [previewRender]);

  return (
    <SimpleMdeReact
      id="simple-mde"
      options={mdeOptions}
      value={value}/>
  );
};

export default MarkdownEditor;
```

# ãŠã‚ã‚Š
ã¨ã‚Šã‚ãˆãšãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚¨ãƒ‡ã‚£ã‚¿ãŒä½¿ãˆã‚‹ã¨ã“ã‚ã¾ã§å®Ÿè£…ã—ã¾ã—ãŸï¼
ã“ã“ã‹ã‚‰å…ˆã¯ã¾ãŸé•·ããªã‚Šãã†ãªã®ã§ã€æ¬¡å›ä»¥é™ç¶šãã‚’æ›¸ã„ã¦ã„ããŸã„ã¨æ€ã„ã¾ã™ã€‚

React TypeScriptã¯åˆå¿ƒè€…ãªã®ã§ã€ä½•ã‹ã”æŒ‡æ‘˜ç­‰ã‚ã‚Œã°ã”æ•™ç¤ºã„ãŸã ã‘ã‚‹ã¨å¹¸ã„ã§ã™ã€‚
æœ€å¾Œã¾ã§ãŠèª­ã¿ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼
